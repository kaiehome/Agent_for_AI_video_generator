{"ast":null,"code":"var _jsxFileName = \"/Users/wangkai/Documents/GitHub/video_agent/video_agent_full/frontend/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport { submitScript, getJobStatus } from \"./api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [script, setScript] = useState(\"\");\n  const [jobId, setJobId] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [videoUrl, setVideoUrl] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const intervalRef = useRef(null);\n  const handleSubmit = async () => {\n    setError(\"\");\n    setVideoUrl(\"\");\n    setStatus(\"提交中...\");\n    try {\n      const id = await submitScript(script);\n      setJobId(id);\n      setStatus(\"处理中...\");\n      pollStatus(id);\n    } catch (e) {\n      setError(\"提交失败：\" + e.message);\n      setStatus(\"\");\n    }\n  };\n  const pollStatus = id => {\n    intervalRef.current = setInterval(async () => {\n      try {\n        const res = await getJobStatus(id);\n        setStatus(res.status);\n        if (res.status === \"finished\") {\n          setVideoUrl(res.video_path);\n          clearInterval(intervalRef.current);\n        }\n        if (res.status === \"failed\") {\n          setError(\"生成失败：\" + (res.error || \"未知错误\"));\n          clearInterval(intervalRef.current);\n        }\n      } catch (e) {\n        setError(\"查询失败：\" + e.message);\n        clearInterval(intervalRef.current);\n      }\n    }, 3000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 600,\n      margin: \"40px auto\",\n      fontFamily: \"sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"AI \\u667A\\u80FD\\u4F53\\u77ED\\u89C6\\u9891\\u751F\\u6210\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: script,\n      onChange: e => setScript(e.target.value),\n      rows: 8,\n      cols: 60,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u8981\\u751F\\u6210\\u89C6\\u9891\\u7684\\u811A\\u672C...\",\n      style: {\n        width: \"100%\",\n        marginBottom: 12\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      disabled: !script || status === \"处理中...\",\n      children: \"\\u4E00\\u952E\\u751F\\u6210\\u89C6\\u9891\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"12px 0\"\n      },\n      children: [status && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u4EFB\\u52A1\\u72B6\\u6001\\uFF1A\", status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 20\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\"\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), videoUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        src: videoUrl,\n        controls: true,\n        width: \"480\",\n        style: {\n          margin: \"12px 0\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: videoUrl,\n        download: true,\n        children: \"\\u4E0B\\u8F7D\\u89C6\\u9891\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"20oqfZXcJkVxbgyeL77Ri5lvI9Y=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","submitScript","getJobStatus","jsxDEV","_jsxDEV","App","_s","script","setScript","jobId","setJobId","status","setStatus","videoUrl","setVideoUrl","error","setError","intervalRef","handleSubmit","id","pollStatus","e","message","current","setInterval","res","video_path","clearInterval","style","maxWidth","margin","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","rows","cols","placeholder","width","marginBottom","onClick","disabled","color","src","controls","href","download","_c","$RefreshReg$"],"sources":["/Users/wangkai/Documents/GitHub/video_agent/video_agent_full/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { submitScript, getJobStatus } from \"./api\";\n\nfunction App() {\n  const [script, setScript] = useState(\"\");\n  const [jobId, setJobId] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [videoUrl, setVideoUrl] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const intervalRef = useRef(null);\n\n  const handleSubmit = async () => {\n    setError(\"\");\n    setVideoUrl(\"\");\n    setStatus(\"提交中...\");\n    try {\n      const id = await submitScript(script);\n      setJobId(id);\n      setStatus(\"处理中...\");\n      pollStatus(id);\n    } catch (e) {\n      setError(\"提交失败：\" + e.message);\n      setStatus(\"\");\n    }\n  };\n\n  const pollStatus = (id) => {\n    intervalRef.current = setInterval(async () => {\n      try {\n        const res = await getJobStatus(id);\n        setStatus(res.status);\n        if (res.status === \"finished\") {\n          setVideoUrl(res.video_path);\n          clearInterval(intervalRef.current);\n        }\n        if (res.status === \"failed\") {\n          setError(\"生成失败：\" + (res.error || \"未知错误\"));\n          clearInterval(intervalRef.current);\n        }\n      } catch (e) {\n        setError(\"查询失败：\" + e.message);\n        clearInterval(intervalRef.current);\n      }\n    }, 3000);\n  };\n\n  return (\n    <div style={{ maxWidth: 600, margin: \"40px auto\", fontFamily: \"sans-serif\" }}>\n      <h2>AI 智能体短视频生成</h2>\n      <textarea\n        value={script}\n        onChange={e => setScript(e.target.value)}\n        rows={8}\n        cols={60}\n        placeholder=\"请输入要生成视频的脚本...\"\n        style={{ width: \"100%\", marginBottom: 12 }}\n      />\n      <br />\n      <button onClick={handleSubmit} disabled={!script || status === \"处理中...\"}>一键生成视频</button>\n      <div style={{ margin: \"12px 0\" }}>\n        {status && <span>任务状态：{status}</span>}\n        {error && <div style={{ color: \"red\" }}>{error}</div>}\n      </div>\n      {videoUrl && (\n        <div>\n          <video src={videoUrl} controls width=\"480\" style={{ margin: \"12px 0\" }} />\n          <br />\n          <a href={videoUrl} download>下载视频</a>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}